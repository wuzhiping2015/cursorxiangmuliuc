以下是基于您的需求整理的详细**需求分析报告**，以 Markdown 格式编写，文件名为 `mrd.md`。这份文档将作为产品经理的视角，全面分析您的小程序开发需求，并为使用 Cursor 软件生成代码提供清晰的开发规范。

---

# mrd.md

## 微信小程序需求分析报告 (MRD)

### 1. 产品概述

#### 1.1 产品名称
**五行生肖计算器**

#### 1.2 核心功能
“五行生肖计算器”是一款基于用户阳历出生日期和出生时辰，自动计算并展示相关命理信息的微信小程序。核心功能包括：
- 将阳历日期转换为农历日期。
- 计算天干地支、生肖、五行属性及五行缺失情况。
- 调用 DeepSeek API 进行推理，生成个性化命理分析报告。

#### 1.3 目标用户
- 对中国传统命理文化（如生肖、五行、八字）感兴趣的用户。
- 希望了解自身命理信息或为亲友查询的普通用户。
- 命理爱好者或需要简单工具验证命理计算的专业人士。

#### 1.4 产品价值
- 提供便捷的命理计算工具，降低用户手动查询的门槛。
- 结合 AI 推理技术，输出个性化分析，提升用户体验。
- 在微信生态内运行，便于传播和使用。

---

### 2. 用户需求分析

#### 2.1 目标用户群体
- **年龄**：18-45 岁，关注传统文化或个人运势的年轻人及中年人。
- **性别**：无明显性别倾向。
- **地域**：主要为中文用户，集中在东亚地区（中国大陆、港澳台）。
- **兴趣**：对命理、生肖、五行或玄学有好奇心。

#### 2.2 使用场景
1. **日常娱乐**：用户在闲暇时输入自己的出生信息，查看命理结果并分享给朋友。
2. **节日活动**：如春节期间，用户查询新年运势或生肖相关信息。
3. **亲友互动**：为家人或朋友计算命理信息，增进交流。
4. **学习研究**：命理爱好者验证算法或学习传统文化知识。

#### 2.3 核心需求
- **便捷性**：快速输入出生信息即可获得结果。
- **准确性**：农历转换、天干地支、五行计算需符合传统算法。
- **趣味性**：AI 生成的分析报告需有趣且易懂。
- **分享性**：支持将结果分享至微信好友或朋友圈。

---

### 3. 功能需求

#### 3.1 功能拆解
##### 3.1.1 用户输入模块
- **输入字段**：
  - 阳历出生日期（年、月、日，格式：YYYY-MM-DD）
  - 出生时辰（可选，12个时辰：子时、丑时等）
- **界面要求**：
  - 日期选择器：微信小程序原生组件（如 `picker`）。
  - 时辰选择：下拉菜单或滚轮选择。
- **校验规则**：
  - 日期范围：1900 年至今。
  - 必填：出生日期；可选：出生时辰。

##### 3.1.2 计算模块
- **功能点**：
  1. **阳历转农历**：
     - 输入：阳历日期。
     - 输出：对应农历日期（如“农历二月初三”）。
  2. **天干地支计算**：
     - 输入：阳历日期、出生时辰。
     - 输出：年份天干地支（如“甲子”）、八字（如“甲子 乙丑 丙寅 丁卯”）。
  3. **五行属性**：
     - 输入：天干地支。
     - 输出：五行分布（金、木、水、火、土的个数）。
  4. **五行缺失**：
     - 输入：五行分布。
     - 输出：缺失的五行（如“缺水”）。
  5. **生肖计算**：
     - 输入：出生年份。
     - 输出：对应生肖（如“龙”）。

##### 3.1.3 AI 推理模块
- **调用 DeepSeek API**：
  - **输入**：计算结果（农历日期、天干地支、五行、生肖等）。
  - **输出**：个性化分析报告（文本形式，约 100-200 字）。
- **API 配置**：
  - 接口地址：DeepSeek 提供的推理 API。
  - 请求参数：JSON 格式，包含计算结果。
  - 返回格式：文本字符串。

##### 3.1.4 结果展示模块
- **展示内容**：
  - 农历日期、天干地支、五行分布、五行缺失、生肖。
  - AI 分析报告。
- **界面要求**：
  - 分块展示，便于阅读。
  - 支持复制文本。
  - 提供“分享”按钮，生成微信分享卡片。

#### 3.2 输入输出示例
- **输入**：
  - 阳历日期：1990-05-15
  - 出生时辰：巳时（09:00-11:00）
- **输出**：
  - 农历日期：农历四月初二
  - 天干地支：庚午 辛巳 壬午 己巳
  - 五行分布：金 2、木 0、水 1、火 3、土 1
  - 五行缺失：缺木
  - 生肖：马
  - AI 分析：（调用 DeepSeek API 生成的个性化解读）

#### 3.3 API 交互方式
- **DeepSeek API**：
  - 请求方式：POST。
  - 请求头：包含 API Key（需开发者提供）。
  - 请求体：
    ```json
    {
      "lunar_date": "农历四月初二",
      "ganzhi": "庚午 辛巳 壬午 己巳",
      "wuxing": "金2 木0 水1 火3 土1",
      "missing_wuxing": "缺木",
      "zodiac": "马"
    }
    ```
  - 返回示例：
    ```json
    {
      "analysis": "您属马，五行缺木，性格热情奔放，但可能缺乏耐心。建议多接触绿色植物以平衡运势。"
    }
    ```

---

### 4. 关键业务流程

1. **用户输入数据**：
   - 用户在小程序首页输入阳历出生日期和出生时辰，点击“计算”按钮。
2. **数据处理与计算**：
   - 系统调用内部算法，计算农历日期、天干地支、五行等。
3. **API 调用**：
   - 将计算结果发送至 DeepSeek API，获取分析报告。
4. **结果展示**：
   - 系统整理所有结果，展示在结果页面。
5. **用户操作**：
   - 用户可复制文本或点击“分享”按钮生成分享卡片。

#### 流程图（文字描述）
```
用户输入 -> 数据校验 -> 计算模块（农历、天干地支、五行等） -> API 调用 -> 结果整合 -> 展示页面 -> 用户分享
```

---

### 5. 开发周期

#### 5.1 开发计划
- **总周期**：预计 4-6 周（使用 Cursor 加速开发）。
- **阶段拆分**：
  1. **需求确认与设计**（3 天）：
     - 完成 MRD，设计界面原型。
  2. **MVP 开发**（2 周）：
     - 实现核心计算功能（不含 AI 推理）。
  3. **API 集成**（1 周）：
     - 接入 DeepSeek API，调试推理功能。
  4. **测试与优化**（1 周）：
     - 功能测试、性能优化。
  5. **上线与迭代**（1 周）：
     - 提交微信审核，上线 MVP 版本。

#### 5.2 MVP 版本优先级
- **高优先级**：
  - 用户输入模块。
  - 计算模块（农历、天干地支、五行、生肖）。
  - 结果展示模块。
- **中优先级**：
  - DeepSeek API 集成。
- **低优先级**：
  - 分享功能、UI 美化。

---

### 6. 商业模式

#### 6.1 是否有付费功能
- **免费版**：提供基础计算功能（农历、五行、生肖）。
- **付费版**（可选）：
  - 解锁 AI 分析报告（单次付费或订阅制）。
  - 提供更详细的八字分析或运势预测。

#### 6.2 盈利方式
1. **内购**：
   - AI 分析报告：单次 2 元，或月订阅 10 元。
2. **广告**：
   - 在结果页面底部插入非侵入式横幅广告。
3. **合作推广**：
   - 与命理相关商家（如风水师、算命服务）合作，收取推广费。

#### 6.3 长期愿景
- 打造命理社区，吸引用户沉淀。
- 提供定制化服务（如婚配分析、起名建议），提升用户粘性。

---

## Cursor 开发指令规范

为确保 Cursor 高效生成代码，以下是推荐的开发指令模板：

### 示例指令
```
使用微信小程序框架开发一个程序，功能如下：
1. 用户输入阳历日期（YYYY-MM-DD）和出生时辰（12个时辰可选）。
2. 系统计算：
   - 阳历转农历日期（调用现有农历算法库）。
   - 天干地支（基于年月日时计算）。
   - 五行分布及缺失情况。
   - 生肖。
3. 调用 DeepSeek API（POST 请求，API Key: [填入您的 Key]），将计算结果作为参数，获取 AI 分析报告。
4. 结果页面展示所有信息，支持分享至微信。
请生成完整的项目结构，包括 wxml、wxss、js 和 json 文件。
```

### 注意事项
1. **模块化**：要求 Cursor 将计算逻辑、API 调用、界面展示分开。
2. **注释**：生成代码需包含详细注释。
3. **依赖**：若需农历算法库，提示使用开源库（如 `lunar-javascript`）。
4. **调试**：生成后手动测试，确保准确性。

---

以上是完整的 `mrd.md` 需求分析报告，您可以直接将其输入至 Cursor 或其他工具中，作为开发的基础文档。如需进一步调整或润色，请随时告诉我！