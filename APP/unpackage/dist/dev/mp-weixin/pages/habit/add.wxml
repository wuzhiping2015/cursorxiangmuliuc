<view class="add-habit-container data-v-d0e98346"><u-navbar vue-id="59dd0e49-1" title="添加新习惯" border="{{false}}" autoBack="{{true}}" class="data-v-d0e98346" bind:__l="__l" vue-slots="{{['right']}}"><u-button vue-id="{{('59dd0e49-2')+','+('59dd0e49-1')}}" type="primary" size="mini" text="保存" data-event-opts="{{[['^click',[['handleSave']]]]}}" bind:click="__e" class="data-v-d0e98346" slot="right" bind:__l="__l"></u-button></u-navbar><view class="form-content data-v-d0e98346"><view class="form-section data-v-d0e98346"><view class="section-title data-v-d0e98346">基本信息</view><u-form vue-id="59dd0e49-3" model="{{formData}}" data-ref="uForm" class="data-v-d0e98346 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('59dd0e49-4')+','+('59dd0e49-3')}}" label="习惯名称" required="{{true}}" class="data-v-d0e98346" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('59dd0e49-5')+','+('59dd0e49-4')}}" placeholder="例如：晨间步行、冥想、读书..." value="{{formData.name}}" data-event-opts="{{[['^input',[['__set_model',['$0','name','$event',[]],['formData']]]]]}}" class="data-v-d0e98346" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('59dd0e49-6')+','+('59dd0e49-3')}}" label="选择图标" required="{{true}}" class="data-v-d0e98346" bind:__l="__l" vue-slots="{{['default']}}"><view class="icon-grid data-v-d0e98346"><block wx:for="{{icons}}" wx:for-item="icon" wx:for-index="__i0__" wx:key="name"><view data-event-opts="{{[['tap',[['selectIcon',['$0'],[[['icons','name',icon.name]]]]]]]}}" class="{{['icon-item','data-v-d0e98346',(formData.icon===icon.name)?'active':'']}}" bindtap="__e"><u-icon vue-id="{{('59dd0e49-7-'+__i0__)+','+('59dd0e49-6')}}" name="{{icon.name}}" color="{{formData.icon===icon.name?'#ffffff':icon.color}}" size="24" class="data-v-d0e98346" bind:__l="__l"></u-icon></view></block></view></u-form-item><u-form-item vue-id="{{('59dd0e49-8')+','+('59dd0e49-3')}}" label="选择颜色" required="{{true}}" class="data-v-d0e98346" bind:__l="__l" vue-slots="{{['default']}}"><view class="color-grid data-v-d0e98346"><block wx:for="{{colors}}" wx:for-item="color" wx:for-index="__i1__" wx:key="value"><view data-event-opts="{{[['tap',[['selectColor',['$0'],[[['colors','value',color.value]]]]]]]}}" class="{{['color-item','data-v-d0e98346',(formData.color===color.value)?'active':'']}}" style="{{'background:'+(color.value)+';'}}" bindtap="__e"></view></block></view></u-form-item></u-form></view><view class="form-section data-v-d0e98346"><view class="section-title data-v-d0e98346">习惯设置</view><u-form vue-id="59dd0e49-9" model="{{formData}}" data-ref="uForm2" class="data-v-d0e98346 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('59dd0e49-10')+','+('59dd0e49-9')}}" label="重复频率" required="{{true}}" class="data-v-d0e98346" bind:__l="__l" vue-slots="{{['default']}}"><u-radio-group bind:input="__e" vue-id="{{('59dd0e49-11')+','+('59dd0e49-10')}}" value="{{formData.frequency}}" data-event-opts="{{[['^input',[['__set_model',['$0','frequency','$event',[]],['formData']]]]]}}" class="data-v-d0e98346" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{frequencies}}" wx:for-item="item" wx:for-index="__i2__" wx:key="value"><u-radio vue-id="{{('59dd0e49-12-'+__i2__)+','+('59dd0e49-11')}}" name="{{item.value}}" label="{{item.label}}" class="data-v-d0e98346" bind:__l="__l"></u-radio></block></u-radio-group><block wx:if="{{formData.frequency==='weekly'}}"><view class="week-select data-v-d0e98346"><block wx:for="{{$root.l0}}" wx:for-item="day" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['toggleWeekDay',[index]]]]]}}" class="{{['week-item','data-v-d0e98346',(day.g0)?'active':'']}}" bindtap="__e">{{day.$orig}}</view></block></view></block></u-form-item><u-form-item vue-id="{{('59dd0e49-13')+','+('59dd0e49-9')}}" label="提醒" class="data-v-d0e98346" bind:__l="__l" vue-slots="{{['default']}}"><u-switch bind:input="__e" vue-id="{{('59dd0e49-14')+','+('59dd0e49-13')}}" value="{{formData.reminder}}" data-event-opts="{{[['^input',[['__set_model',['$0','reminder','$event',[]],['formData']]]]]}}" class="data-v-d0e98346" bind:__l="__l"></u-switch></u-form-item><block wx:if="{{formData.reminder}}"><u-form-item vue-id="{{('59dd0e49-15')+','+('59dd0e49-9')}}" label="提醒时间" class="data-v-d0e98346" bind:__l="__l" vue-slots="{{['default']}}"><u-time-picker vue-id="{{('59dd0e49-16')+','+('59dd0e49-15')}}" mode="time" show="{{false}}" value="{{formData.reminderTime}}" data-event-opts="{{[['^confirm',[['timeConfirm']]],['^input',[['__set_model',['$0','reminderTime','$event',[]],['formData']]]]]}}" bind:confirm="__e" bind:input="__e" class="data-v-d0e98346" bind:__l="__l"></u-time-picker><view data-event-opts="{{[['tap',[['showTimePicker',['$event']]]]]}}" class="time-select data-v-d0e98346" bindtap="__e">{{''+(formData.reminderTime||'请选择时间')+''}}</view></u-form-item></block></u-form></view><view class="form-section data-v-d0e98346"><view class="section-title data-v-d0e98346">习惯叠加</view><view class="stacking-info data-v-d0e98346">将新习惯与已有习惯关联，提高养成成功率。例如："晨跑后，我会冥想10分钟"</view><u-select bind:input="__e" vue-id="59dd0e49-17" list="{{existingHabits}}" placeholder="选择已有习惯" value="{{formData.stackHabit}}" data-event-opts="{{[['^input',[['__set_model',['$0','stackHabit','$event',[]],['formData']]]]]}}" class="data-v-d0e98346" bind:__l="__l"></u-select></view></view></view>